#!/bin/csh
#
# File: $ECMWFHOME/use/use.magics
#
# Purpose: Set the environment for default (i.e. current) version of MAGICS
#
# Authors: Richard Fisker
#
################################################################################

# Check if doublemagics is not already selected
#
#if ($?envSelected == 0) setenv envSelected ""
#foreach Keyword ($envSelected)
#	if ($Keyword == "doublemagics") exit
#end

set version = new
set length = "_r8"

setenv MAG_HOME /usr/local/apps/Magics/${version}
echo \$MAG_HOME changed to $MAG_HOME

setenv MAG_LOGGING on

set maglib = /usr/local/apps/Magics/${version}/lib
set gnulib = /usr/local/apps/gnu/lib

if ($ARCH == linux) then
	setenv MAGLIB "-L${maglib} -lmagics${length} -lMvDevices${length} -lmagics_r8 -lgd -lpng -ljpeg -lz -lfreetype -L${gnulib} -lstdc++ -lm"
	echo \$MAGLIB changed to $MAGLIB
	if ($?LD_LIBRARY_PATH) then
		setenv LD_LIBRARY_PATH /usr/local/apps/gnu.rel303/lib:$LD_LIBRARY_PATH
	else	
		setenv LD_LIBRARY_PATH /usr/local/apps/gnu.rel303/lib
	endif
	echo \$LD_LIBRARY_PATH changed to $LD_LIBRARY_PATH
	setenv EMOSLIB "-L/usr/local/lib -lemos${length}"
	echo \$EMOSLIB changed to $EMOSLIB

else if  ($ARCH == sgimips) then 
	setenv MAGLIB "-L${MAG_HOME}/lib -lmagGL${length} -lMvDevices${length} -lftn -lfortran -lm"
	echo \$MAGLIB changed to $MAGLIB
	setenv EMOSLIB -lemos${length}
	echo \$EMOSLIB changed to $EMOSLIB
	setenv LD_LIBRARYN32_PATH /usr/local/apps/Magics/${version}/lib:/usr/local/lib32:/lib32:/usr/lib32 
	echo \$LD_LIBRARYN32_PATH changed to $LD_LIBRARYN32_PATH

else if ($ARCH == hppa) then
	setenv MAGLIB "-L/usr/local/lib,-lmag,-lfgks,-ldgks,-lcgks"
	echo \$MAGLIB changed to $MAGLIB

else if ($ARCH == rs6000) then
	setenv MAGLIB "-L/usr/local/apps/Magics/new/lib -lmagics_r8 -lMvDevices_r8 -lgd -lpng -ljpeg -lz -lfreetype -lxlf90 -lGLw -lGLU -lGL"
	echo \$MAGLIB changed to $MAGLIB
	setenv EMOSLIB "-L/usr/local/lib -lemos.R64.D64.I32"
	echo \$EMOSLIB changed to $EMOSLIB
endif

# Mark environment magics as read
#
setenv envSelected "doublemagics $envSelected"
