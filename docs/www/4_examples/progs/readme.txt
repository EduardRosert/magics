The Magics++ Test Suite


0. Setup

   Ensure that your directory structure is set up by going to the root
   of the www directory and running the script tools/make_html_dirs.

   Now go to 4_examples.progs.
   The test suite creates its excecutables in a directory called 'bin'
   and its output (PostScript, GIF) in a directory called 'ps'.
   Because we may want to keep different outputs, we actually
   have these as links, set by the 'setbin' command. This also creates
   the directories it creates links to.
   'setbin -h' tells you the available parameters.
   For example:

   setbin -shared
   bin  directory set to /var/tmp/cgi/mppbins/mppbin_suse9_test_shared_fortran
   logs directory set to /var/tmp/cgi/mpplogs/mpplog_suse9_test_shared_fortran
   ps   directory set to ../../html/test/fortran

   You will then wish to call this script when, for instance, you
   switch between shared and static library tests so that the executables
   do not get mixed up.



1. Set up your compile/link environment, ensuring that
   MAGICS and Magics++ are available.


2. By default, running the test suite will only recompile and run those
   programs whose source code file is newer than the program file.
   For the static library, you will need to remove the executables
   before running again with a new library:
     cleanmpponly


3. type:
     make_testsuite -h

   to see all available options, and then 
     make_testsuite  [options]

   to run it.

   This compiles and runs all example programs under MAGICS 6.9
   and Magics++.
   It checks the date/time of the source files compared to the
   binary files and only compiles what it needs to. The binary
   programs are placed in 'bin', output plots in 'ps' and log
   files in 'logs'.

   Command-line options for make_testsuite for efficiency:
     -nomag69      : MAGICS 6.9 programs will not be compiled and run
     -nogifs       : GIF images on the web pages will not be generated by ImageMagick
     -nocompilempp : All Magics++ programs will be run, but not recompiled
                     This is used for testing the shared library once the executables
                     are in place.
     -noodb        : Does not run the ODB examples (these can take some time)
     -ps_gif       : Produces PS and GIF in a single run
     -quick        : Produces just PS output in cylindrical projection

   The output is initially placed in 'ps', which is linked to the html
   directory. You can point your browser at:
   
   magics/docs/www/html/test/fortran/cont_noshade_ex_CYLINDRICAL.html


---
FAQ
---

Q:  No executables have been produced!
A1: Did you run with -nocompilempp without any existing executables?
    If so, then run without this parameter first in order to create
    the executables.
A2: Check the compile logs in logs/*compile.log to see if there was a
    problem with the compilations.
A3: Check that you have a Magics++ environment set up.


Iain Russell
28th March 2007
